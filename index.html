<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA APOD</title>
    <link rel="icon" type="image/ico" href="./images/favicon.ico">
    <link rel="stylesheet" href="./styles/main.css">
</head>

<body>

    <!-- Loader -->
    <div class="loader hidden">
        <img src="./images/rocket.svg" alt="Loading">
    </div>

    <!-- Container -->
    <div class="container">

        <!-- Navigation -->
        <div class="navigation-container">
            <span class="background"></span>
            <!-- Results Nav -->
            <span class="navigation-items" id="resultsNav">
                <h3 class="clickable" onclick="updateDOM('favourites')">Favourites</h3>
                <h3 style="user-select: none">&nbsp;&nbsp;&nbsp;â€¢&nbsp;&nbsp;&nbsp;</h3>
                <h3 class="clickable" onclick="getNasaPictures()">Load More</h3>
            </span>
            <!-- Favourites Nav -->
            <span class="navigation-items hidden" id="favouritesNav">
                <h3 class="clickable" onclick="getNasaPictures()">Load More NASA Images</h3>
            </span>
        </div>

        <!-- Images Container -->
        <div class="images-container">
            <!-- <div class="card">
                <a href="" title="View Full Image" target="_blank">
                    <img src="https://apod.nasa.gov/apod/image/2203/ArcoCircumzenitale.jpg"
                    alt="NASA Picture of the Day" class="card-img-top">
                </a>
                <div class="card-body">
                    <h5 class="card-title">Title of Image</h5>
                    <p class="clickable" style="display: inline">Add to Favourites</p>
                    <p class="card-text">
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni corrupti perspiciatis laborum
                        molestias provident reiciendis nisi perferendis temporibus, odio illum quis porro atque est
                        exercitationem dolor id vero, sint quam? Lorem ipsum dolor sit amet consectetur adipisicing
                        elit. Magni corrupti perspiciatis laborum molestias provident reiciendis nisi perferendis
                        temporibus, odio illum quis porro atque est exercitationem dolor id vero, sint quam?
                    <p>
                    <small class="text-muted">
                        <strong>11-03-2020</strong>
                        <span>Copyright Info</span>
                    </small>
                </div>
            </div> -->
        </div>

    </div>

    <!-- Save Confirmation -->
    <div class="save-confirmed hidden">
        <h1>ADDED!</h1>
    </div>

    <!-- Script -->
    <script src="./js/main.js"></script>


    <!-- 
        const resultsNav = document.getElementById('resultsNav')
const favouritesNav = document.getElementById('favouritesNav')
const imagesContainer = document.querySelector('.images-container')
const saveConfirmed = document.querySelector('.save-confirmed')
const loader = document.querySelector('.loader')

// NASA API
const count = 10
const apiKey = 'DEMO_KEY'
const apiUrl = `https://api.nasa.gov/planetary/apod?api_key=${apiKey}&count=${count}&thumbs=false`
const errorImageUrl = 'https://upload.wikimedia.org/wikipedia/commons/d/d1/Image_not_available.png'

let resultsArray = []
let favourites = {}

function createDOMNodes() {
    resultsArray.forEach(result => {
        // Card Container
        const card = document.createElement('div')
        card.classList.add('card')
            // Link
        const link = document.createElement('a')
        link.href = result.hdurl
        link.title = 'View Full Image'
        link.target = '_blank'
            // Image
        const image = document.createElement('img')
        image.src = `${result.media_type!=='image' ? errorImageUrl : result.url}`
        image.alt = 'NASA Picture of the Day'
        image.loading = 'lazy'
        image.classList.add('card-img-top')
            // Card Body
        const cardBody = document.createElement('div')
        cardBody.classList.add('card-body')
            // Card Title
        const cardTitle = document.createElement('h5')
        cardTitle.classList.add('card-title')
        cardTitle.textContent = result.title
            // Save Text
        const saveText = document.createElement('p')
        saveText.classList.add('clickable')
        saveText.textContent = 'Add to Favourites'
        saveText.setAttribute('onclick', `saveFavourite('${result.url}')`)
            // Card Text
        const cardText = document.createElement('p')
        cardText.textContent = result.explanation
            // Footer Container
        const footer = document.createElement('small')
        footer.classList.add('text-muted')
            // Date
        const date = document.createElement('strong')
        date.textContent = result.date
            // Copyright
        const copyrightResult = result.copyright === undefined ? '' : result.copyright
        const copyright = document.createElement('span')
        copyright.textContent = ` ${copyrightResult}`

        // Append
        footer.append(date, copyright)
        cardBody.append(cardTitle, saveText, cardText, footer)
        link.appendChild(image)
        card.append(link, cardBody)
        imagesContainer.appendChild(card)
    })
}

function updateDOM() {
    createDOMNodes()
}

// Get 10 Images from NASA API
async function getNasaPictures() {
    try {
        const response = await fetch(apiUrl)
        resultsArray = await response.json()
        updateDOM()
    } catch (error) {
        // Catch Error Here
    }
}

// Add result to Favourites
function saveFavourite(itemUrl) {
    // Loop through Results Array to select Favourite
    resultsArray.forEach(item => {
        if (item.url.includes(itemUrl) && !favourites[itemUrl]) {
            favourites[itemUrl] = item
                // Show Save Confirmation for 2 seconds
            saveConfirmed.classList.remove('hidden')
            setTimeout(() => {
                    saveConfirmed.classList.add('hidden')
                }, 2000)
                // Set Favourites in Local Storage
            localStorage.setItem('nasaFavourites', JSON.stringify(favourites))
        }
    })
}

// On Load
getNasaPictures()
     -->
</body>

</html>